t="er_profiles";!function(e){var a={current:"Default",er_profiles:{Default:{checklistData:{},collapsed:{},isDefault:!0,lastActiveTab:"#tabPlaythrough",activeFilter:"all"}}},s=e.jStorage.get(t,a);function l(){if(0===e("ul li[data-id]").length)return;const a=s[t][s.current].lastActiveTab||"#tabPlaythrough",l=s[t][s.current].activeFilter||"all";s[t][s.current].collapsed||(s[t][s.current].collapsed={}),e(".collapse").each((function(){const a=e(this).attr("id");if("navbarNavDropdown"===a)return;s[t][s.current].collapsed[a]?(e(this).removeClass("show"),e(this).prev().find(".btn-collapse").addClass("collapsed")):(e(this).addClass("show"),e(this).prev().find(".btn-collapse").removeClass("collapsed"))})),e(".btn-primary").removeClass("active"),e(`.btn-primary[data-filter="${l}"]`).addClass("active"),n(l),e(".nav-link").removeClass("active"),e(".tab-pane").removeClass("show active"),e(`a[href="${a}"]`).addClass("active"),e(a).addClass("show active"),e(`a[href="${a}"]`).data("show-buttons")?e("#collapseButtons").show():e("#collapseButtons").hide(),e("ul li[data-id]").each((function(){var a,l,o,i,c;a=e(this),l=a.html().split("\n")[0],o=a.children("ul"),i=a.attr("data-id"),c='<div class="checkbox"><input type="checkbox" id="'+i+'"><label for="'+i+'"><span class="item_content">'+l+"</span></label></div>",a.html(c).append(o),s[t][s.current].checklistData[i]&&(e("#"+i).prop("checked",!0),e("label",a).addClass("completed"))})),o(),i()}function o(){var a=e("#profiles");a.empty(),e.each(s[t],(function(t){a.append(e("<option>",{value:t,text:t,selected:t===s.current}))}))}function i(){e('[id$="_overall_total"]').each((function(){var a=this.id.match(/(.*)_overall_total/)[1],l=0,o=0;e('[id^="'+a+'_totals_"]').each((function(){for(var i=new RegExp(a+"_totals_(.*)"),c=parseInt(this.id.match(i)[1]),n=0,r=0,h=s[t][s.current].activeFilter,d="playthrough"===a,p=1;;p++){var u=e("#"+a+"_"+c+"_"+p);if(0==u.length)break;var v=u.closest("li");d&&"all"!==h&&!v.find("a").hasClass(h)||(n++,l++,u.prop("checked")&&(r++,o++))}if(n>0){var f=e("#"+a+"_totals_"+c);f.html(r+"/"+n),r===n?f.removeClass("in_progress").addClass("done"):r>0?f.removeClass("done").addClass("in_progress"):f.removeClass("done in_progress")}r===n?(this.innerHTML=e("#"+a+"_nav_totals_"+c)[0].innerHTML="DONE",e(this).removeClass("in_progress").addClass("done"),e(e("#"+a+"_nav_totals_"+c)[0]).removeClass("in_progress").addClass("done")):(this.innerHTML=e("#"+a+"_nav_totals_"+c)[0].innerHTML=r+"/"+n,e(this).removeClass("done").addClass("in_progress"),e(e("#"+a+"_nav_totals_"+c)[0]).removeClass("done").addClass("in_progress"))})),o===l?(this.innerHTML="DONE",e(this).removeClass("in_progress").addClass("done")):(this.innerHTML=o+"/"+l,e(this).removeClass("done").addClass("in_progress"))}))}function c(){e('.checkbox input[type="checkbox"]').prop("checked",!1),e(".checkbox label").removeClass("completed"),e(".collapse").addClass("show"),e(".btn-collapse").removeClass("collapsed"),e('[id^="_totals_"], [id^="_nav_totals_"]').removeClass("done in_progress").html("0/0")}function n(a){"all"===a?e(".playthrough-wrapper li").show():(e(".playthrough-wrapper li").hide(),e(".playthrough-wrapper li a."+a).each((function(){const t=e(this).closest("li"),a=t.parents("li");t.show(),a.length&&a.show()}))),e(".playthrough-wrapper h3").show(),s[t][s.current].activeFilter=a,e.jStorage.set(t,s),i()}function r(a){c(),s.current=a,s[t][a]||(s[t][a]={checklistData:{},collapsed:{},isDefault:!1,lastActiveTab:"#tabPlaythrough",activeFilter:"all"}),e.jStorage.set(t,s),e(".collapse").each((function(){const l=e(this).attr("id");s[t][a].collapsed[l]?(e(this).removeClass("show"),e(this).prev().find(".btn-collapse").addClass("collapsed")):(e(this).addClass("show"),e(this).prev().find(".btn-collapse").removeClass("collapsed"))}));const l=s[t][a].lastActiveTab||"#tabPlaythrough",o=s[t][a].activeFilter||"all";e(".nav-link").removeClass("active"),e(".tab-pane").removeClass("show active"),e(`a[href="${l}"]`).addClass("active"),e(l).addClass("show active"),e(".btn-primary").removeClass("active"),e(`.btn-primary[data-filter="${o}"]`).addClass("active"),h(a),n(o),i()}function h(a){const l=s[t][a].activeFilter||"all";e(".btn-primary[data-filter]").removeClass("active"),e(`.btn-primary[data-filter="${l}"]`).addClass("active"),n(l),e.each(s[t][a].checklistData,(function(t,a){const s=e("#"+t);if(s.length>0){s.prop("checked",a);const t=s.closest(".checkbox").find("label");a?t.addClass("completed"):t.removeClass("completed")}})),s[t][a].collapsed&&e.each(s[t][a].collapsed,(function(t,a){const s=e("#"+t);s.length>0&&(a?s.removeClass("show"):s.addClass("show"),function(t,a){var s=e('a[href="#'+t+'"]');a?s.addClass("collapsed"):s.removeClass("collapsed")}(t,a))}))}function d(t,a=""){let s;e(".playthrough-wrapper li").hide(),a||e("#playthrough_list").unhighlight(),s="all"===t?e(".playthrough-wrapper li[data-id]"):e(".playthrough-wrapper li a."+t).closest("li"),a?(e("#playthrough_list").unhighlight(),s.each((function(){const t=e(this);if(t.find(".checkbox .item_content").text().toLowerCase().includes(a))t.show(),t.parents("li").show();else{const s=t.find("li").filter((function(){return e(this).find(".checkbox .item_content").text().toLowerCase().includes(a)}));s.length>0&&(s.show(),t.show(),t.parents("li").show())}})),e("#playthrough_list .checkbox .item_content").highlight(a)):(s.show(),s.parents("li").show()),e(".playthrough-wrapper h3").show()}function p(t,a){e("#searchBar-"+t).on("input",(function(){const s=e(this).val().toLowerCase();e("#tab"+t).unhighlight(),e(`#tab${t} li[data-id]`).each((function(){const t=e(this),a=t.text().toLowerCase();""===s||a.includes(s)?(t.show(),t.parents("li").show()):t.hide()})),e(`#tab${t} h3`).show(),s&&e(`#tab${t} ${a}`).highlight(s)}))}s[t].Default||(s[t].Default={checklistData:{},collapsed:{},isDefault:!0},e.jStorage.set(t,s)),e(document).ready((function(){l(),i(),e(".theme-btn").click((function(){const t=document.documentElement.classList.toggle("dark-mode");localStorage.setItem("theme",t?"dark-mode":"")})),e("a[href^='http']").attr("target","_blank"),e(".nav-link").on("click",(function(a){a.preventDefault(),e(".nav-link").removeClass("active"),e(".tab-pane").removeClass("show active"),e(this).addClass("active");const l=e(this).attr("href");s[t][s.current].lastActiveTab=l,e.jStorage.set(t,s),e(l).addClass("show active"),e(".searchBar").val(""),e(".tab-pane").unhighlight(),e("#tabAchievements li[data-id]").show();d(s[t][s.current].activeFilter,""),e(this).data("show-buttons")?e("#collapseButtons").show():e("#collapseButtons").hide()})),e(document).on("click",'input[type="checkbox"]',(function(){var a=e(this).attr("id"),l=e(this).prop("checked");s[t][s.current].checklistData[a]=l;var o=e(this).closest(".checkbox").find("label");l?o.addClass("completed"):o.removeClass("completed"),e.jStorage.set(t,s),i()})),e("#profiles").on("change",(function(){r(e(this).val())})),e("#addProfile").on("click",(function(){var a=prompt("Enter new profile name:");if(a){if(s[t][a])return void alert("Profile "+a+" already exists!");c(),s[t][a]={checklistData:{},collapsed:{},isDefault:!1,lastActiveTab:"#tabPlaythrough",activeFilter:"all"},s.current=a,e.jStorage.set(t,s),e(".btn-primary[data-filter]").removeClass("active"),e('.btn-primary[data-filter="all"]').addClass("active"),e('[id^="_totals_"], [id^="_nav_totals_"]').each((function(){e(this).removeClass("done in_progress"),e(this).html("0/0")})),e(".collapse").each((function(){e(this).collapse("show"),e(this).prev().find(".btn-collapse").removeClass("collapsed")})),o(),h(a),n("all"),i()}})),e("#editProfile").on("click",(function(){var a=s.current;if(s[t][a].isDefault)alert("Can't edit the default profile");else{var l=prompt("Enter new name for profile:",a);l&&l!==a&&(s[t][l]={...s[t][a],isDefault:!1},delete s[t][a],s.current=l,e.jStorage.set(t,s),o())}})),e("#deleteProfile").on("click",(function(){var a=s.current;if(s[t][a].isDefault){if(confirm("Reset all progress for the default profile?")){const l=s[t][a].activeFilter;s[t][a]={checklistData:{},collapsed:{},isDefault:!0,lastActiveTab:"#tabPlaythrough",activeFilter:l},e.jStorage.set(t,s),e(".collapse").each((function(){e(this).collapse("show")})),e('[id^="_totals_"]').each((function(){e(this).removeClass("done in_progress"),e(this).html("0/0")})),e('[id^="_nav_totals_"]').each((function(){e(this).removeClass("done in_progress"),e(this).html("0/0")})),h(a),e('input[type="checkbox"]').prop("checked",!1),e.each(s[t][s.current].checklistData,(function(t,a){e("#"+t).prop("checked",a)})),i(),n(l),i()}}else confirm(`Are you sure you want to delete "${a}"?`)&&function(a){if(s[t][a].isDefault){const l={checklistData:{},collapsed:{},isDefault:!0,lastActiveTab:"#tabPlaythrough",activeFilter:s[t][a].activeFilter||"all"};return s[t][a]=l,e.jStorage.set(t,s),c(),h(a),i(),!0}if(!s[t][a]||Object.keys(s[t]).length<=1)return!1;let l=Object.keys(s[t]).find(e=>s[t][e].isDefault);return delete s[t][a],s.current=l,e.jStorage.set(t,s),c(),h(l),!0}(a)&&(r(s.current),h(s.current),o(),i())})),e(".collapse").each((function(){var a=e(this).attr("id");void 0===s[t][s.current].collapsed&&(s[t][s.current].collapsed={}),void 0===s[t][s.current].collapsed[a]&&(s[t][s.current].collapsed[a]=!e(this).hasClass("show"))})),e(".collapse").on("shown.bs.collapse hidden.bs.collapse",(function(){const a=e(this).attr("id"),l=!e(this).hasClass("show");s[t][s.current].collapsed[a]=l,e.jStorage.set(t,s)})),e(".btn-collapse-all").on("click",(function(){const a=e(this).closest(".tab-pane").find(".collapse");a.removeClass("show"),a.prev().find(".btn-collapse").addClass("collapsed");const l={};a.each((function(){l[e(this).attr("id")]=!0})),Object.assign(s[t][s.current].collapsed,l),e.jStorage.set(t,s)})),e(".btn-expand-all").on("click",(function(){const a=e(this).closest(".tab-pane").find(".collapse");a.addClass("show"),a.prev().find(".btn-collapse").removeClass("collapsed");const l={};a.each((function(){l[e(this).attr("id")]=!1})),Object.assign(s[t][s.current].collapsed,l),e.jStorage.set(t,s)})),e(window).scroll((function(){e(this).scrollTop()>300?e("#backToTop").addClass("show"):e("#backToTop").removeClass("show")})),e("#backToTop").click((function(){return window.scrollTo({top:0,behavior:"auto"}),!1})),e(".btn-primary[data-filter]").click((function(){const a=e(this).data("filter"),l=e("#searchBar-playthrough").val().toLowerCase();e(".btn-primary[data-filter]").removeClass("active"),e(this).addClass("active"),s[t][s.current].activeFilter=a,e.jStorage.set(t,s),d(a,l),i()})),i()})),e((function(){e("#searchBar-playthrough").on("input",(function(){const a=e(this).val().toLowerCase();d(s[t][s.current].activeFilter,a)})),e("#searchBar-achievements").on("input",(function(){const t=e(this).val().toLowerCase();e("#tabAchievements").unhighlight(),e("#tabAchievements li[data-id]").each((function(){const a=e(this),s=a.text().toLowerCase();""===t||s.includes(t)?(a.show(),a.parents("li").show()):a.hide()})),e("#tabAchievements h3").show(),t&&e("#tabAchievements .checkbox .item_content").highlight(t)})),e(".nav-link").on("click",(function(){e(".searchBar").val(""),e(".tab-pane").unhighlight()}))})),p("Armaments",".checkbox .item_content"),p("Armor",".checkbox .item_content"),p("Misc",".checkbox .item_content")}(jQuery)